# Cartographer: Write-up

Даётся клон GeoGuessr -- игры, в которой по Street View (панорама, по которой можно ходить) надо
найти место, где эта панорама началась. Отличия в том, что в этом варианте нет системы очков, да и
панорамы тоже нет. Есть только картинка в абсурдно низком разрешении, input с плейсхолдером и
интерактивная карта.

Среди первых 124 картинок каждая всего лишь пятая указывает на какое-то легкое место. Можно
попытаться протыкать их руками, но достаточно быстро будут попадаться места, которые найти непросто
-- например, абстрактная дорога.

Нетрудно догадаться, что общение с сервером происходит через плюс-коды вместо передачи float-ов
широты и долготы. Можно заметить подключение внешнего скрипта OpenLocationCode и посмотреть, как
координаты с карты выставляются в поле ответа.

От одной маленькой картинки не очень много толку. Можно предположить по сложности "несложная"
заглянуть в её EXIF-метаданные и найти там геометку. Забираем её через любой онлайн-просмотрщик EXIF
и переводим её в плюс-код.

Ручной перевод немного муторный: открыть точку в гуглокартах, скопировать плюс-код с человеческим
городом, и переведём его в правильный через [карту плюс-кодов](https://plus.codes/map). Как раз для
ручного протыкивания и есть это ограничение в 100 метров. Автор задания считает, что страшное 2024
в самом начале отпугнуло от полностью ручного решения.

Через три-четыре картинки утомляемся ручной работой и пишем [простой скрипт на питоне](solve.py),
который выдирает геометку и переводит её в плюс-код и отправляет на сервер. Библиотеку для работы с
плюс-кодами можно взять оттуда же, откуда я взяла её для js-кода: с [гитхаб-репы с реализацией](
https://github.com/google/open-location-code/).

Дальше -- дело техники, можно чай попить, так как решение работает около десяти минут.

За нажатием F5 пока работает скрипт можно заметить, что у автора лень не знает границ, и картинки
начинают повторяться. Однако это не повод закидывать один и тот же ответ -- так как после 124 раунда
картинки выбираются так, чтобы они примерно соответствовали локации в геометке.

После завершения солвера на странице с задачей нас ждёт [sticker.webp](
https://github.com/teamteamdev/ugractf-2024-quals/blob/master/tasks/vfs/vfs/sticker.webp) и алерт с
флагом.

Флаг: **ugra_i_am_the_mr_worldwide_lbzvmcrl3nef**
